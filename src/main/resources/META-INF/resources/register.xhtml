<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:sec="http://www.springframework.org/security/tags">
<f:view contentType="text/html">

    <h:head>
        <title>Docker UI</title>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
        <link rel="stylesheet" type="text/css" href="/css/style.css" />
        <meta name="mobile-web-app-capable" content="yes"/>
    </h:head>


    <h:body>
        <f:metadata>
            <f:event type="preRenderView" listener="#{registerBean.onRequest}" />
        </f:metadata>
        <div align="center">
            <h2>Together - Register</h2>
        </div>
            <b:container>
                <b:row>
                    <b:column span="6" offset="3">
                        <b:panel look="primary" collapsible="false">
                            <b:row rendered="#{param.success eq '1'}">
                                <b:column>
                                    <b:alert severity="info" title="Registration successful">
                                        You can now login here
                                        <b:link includeViewParams="true" href="/login.xhtml" value="Login" />
                                    </b:alert>
                                </b:column>
                            </b:row>

                            <h:form id="registrationForm" rendered="#{sec:isAnonymous() and param.success ne '1'}">
                                <b:messages />
                                <b:row>
                                    <b:column span="4">
                                        <h:outputText value="Username:" for="username" />
                                    </b:column>
                                    <b:column span="8">
                                        <b:inputText id="username" value="#{registerBean.registration.username}">
                                            <f:facet name="prepend">
                                                <b:icon name="user" />
                                            </f:facet>
                                        </b:inputText>
                                    </b:column>
                                </b:row>
                                <b:row>
                                    <b:column span="4">
                                        <h:outputText value="eMail:" for="email" />
                                    </b:column>
                                    <b:column span="8">
                                        <b:inputText id="email" value="#{registerBean.registration.email}">
                                            <f:facet name="prepend">
                                                <b:icon name="envelope" />
                                            </f:facet>
                                        </b:inputText>
                                    </b:column>
                                </b:row>
                                <b:row>
                                    <b:column span="4">
                                        <h:outputText value="Password:" />
                                    </b:column>
                                    <b:column span="8">
                                        <b:inputSecret id="password" value="#{registerBean.registration.password}">
                                            <f:facet name="prepend">
                                                <b:iconAwesome name="key" />
                                            </f:facet>
                                            <f:validateBean validationGroups="de.tosken.dockerui.validation.group.PasswordValidationGroup" />
                                        </b:inputSecret>
                                    </b:column>
                                </b:row>
                                <b:row>
                                    <b:column span="4">
                                        <h:outputText value="Re-Type password:" />
                                    </b:column>
                                    <b:column span="8">
                                        <b:inputSecret id="matchingPassword" value="#{registerBean.registration.matchingPassword}">
                                            <f:facet name="prepend">
                                                <b:iconAwesome name="key" />
                                            </f:facet>
                                            <f:validateBean validationGroups="de.tosken.dockerui.validation.group.PasswordValidationGroup" />
                                        </b:inputSecret>
                                    </b:column>
                                </b:row>
                                <b:row>
                                    <b:column span="4" offset="4"  >
                                        <b:commandButton value="Register" look="primary" action="#{registerBean.onRegister}" />
                                    </b:column>
                                </b:row>
                                <f:validateWholeBean value="#{registerBean.registration}" rendered="#{facesContext.currentPhaseId.ordinal ne 4}" validationGroups="de.tosken.dockerui.validation.group.PasswordValidationGroup" />
                            </h:form>
                        </b:panel>
                    </b:column>
                </b:row>
            </b:container>
    </h:body>
</f:view>
</html>